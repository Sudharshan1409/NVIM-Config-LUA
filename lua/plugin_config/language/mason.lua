local mason = require('mason-lspconfig')
local lspconfig = require('lspconfig')
local lsp_zero = require('lsp-zero')
lsp_zero.extend_lspconfig()
mason.setup({
    ensure_installed = {
        'tsserver',
        'eslint',
        'pyright',
        'pylsp',
        'ruff_lsp',
        'lua_ls',
        'marksman',
        'vimls',
        'bashls',
        'dockerls',
        'jsonls',
        'html',
        'yamlls',
        'cssls',
        'graphql',

    },
    handlers = {
        lsp_zero.default_setup,
        lua_ls = function()
            -- (Optional) Configure lua language server for neovim
            local lua_opts = lsp_zero.nvim_lua_ls()
            lspconfig.lua_ls.setup(lua_opts)
            lspconfig.tsserver.setup({})
        end,
    }
})


lspconfig.yamlls.setup {
    cmd = { "yaml-language-server", "--stdio" },
    filetypes = { "yaml", "yml", "yaml.docker-compose" },
    settings = {
        yaml = {
            schemas = {
                ['https://raw.githubusercontent.com/aws/serverless-application-model/main/samtranslator/schema/schema.json'] = "sam-schema.json",
                ['https://raw.githubusercontent.com/awslabs/goformation/master/schema/cloudformation.schema.json'] = "cloudformation-schema.json",
            },
            customTags = {
                "!And scalar",
                "!And sequence",
                "!And mapping",
                "!If scalar",
                "!If sequence",
                "!If mapping",
                "!Not scalar",
                "!Not sequence",
                "!Not mapping",
                "!Equals scalar",
                "!Equals sequence",
                "!Equals mapping",
                "!Or scalar",
                "!Or sequence",
                "!Or mapping",
                "!FindInMap scalar",
                "!FindInMap sequence",
                "!FindInMap mapping",
                "!Base64 scalar",
                "!Base64 sequence",
                "!Base64 mapping",
                "!Cidr scalar",
                "!Cidr sequence",
                "!Cidr mapping",
                "!Ref scalar",
                "!Ref sequence",
                "!Ref mapping",
                "!Sub scalar",
                "!Sub sequence",
                "!Sub mapping",
                "!GetAtt scalar",
                "!GetAtt sequence",
                "!GetAtt mapping",
                "!GetAZs scalar",
                "!GetAZs sequence",
                "!GetAZs mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
            }
        }
    }
}

lspconfig.docker_compose_language_service.setup {
    cmd = { "yaml-language-server", "--stdio" },
    filetypes = { "yaml", "yml", "yaml.docker-compose" },
    settings = {
        yaml = {
            schemas = {
                ['https://raw.githubusercontent.com/aws/serverless-application-model/main/samtranslator/schema/schema.json'] = "sam-schema.json",
                ['https://raw.githubusercontent.com/awslabs/goformation/master/schema/cloudformation.schema.json'] = "cloudformation-schema.json",
            },
            customTags = {
                "!And scalar",
                "!And sequence",
                "!And mapping",
                "!If scalar",
                "!If sequence",
                "!If mapping",
                "!Not scalar",
                "!Not sequence",
                "!Not mapping",
                "!Equals scalar",
                "!Equals sequence",
                "!Equals mapping",
                "!Or scalar",
                "!Or sequence",
                "!Or mapping",
                "!FindInMap scalar",
                "!FindInMap sequence",
                "!FindInMap mapping",
                "!Base64 scalar",
                "!Base64 sequence",
                "!Base64 mapping",
                "!Cidr scalar",
                "!Cidr sequence",
                "!Cidr mapping",
                "!Ref scalar",
                "!Ref sequence",
                "!Ref mapping",
                "!Sub scalar",
                "!Sub sequence",
                "!Sub mapping",
                "!GetAtt scalar",
                "!GetAtt sequence",
                "!GetAtt mapping",
                "!GetAZs scalar",
                "!GetAZs sequence",
                "!GetAZs mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
                "!Split mapping",
                "!Join scalar",
                "!Join sequence",
                "!Join mapping",
                "!ImportValue scalar",
                "!ImportValue sequence",
                "!ImportValue mapping",
                "!Select scalar",
                "!Select sequence",
                "!Select mapping",
                "!Split scalar",
                "!Split sequence",
            }
        }
    }
}
